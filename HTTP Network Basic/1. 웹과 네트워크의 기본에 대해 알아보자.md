# `1. 웹과 네트워크의 기본에 대해 알아보자`

## `HTTP/0.9`

HTTP가 등장한 시기는 1990년이고 이 당시 등장한 HTTP는 1.0 이전이라는 의미에서 HTTP/0.9로 불리고 있다.

<br>

## `HTTP/1.0`

HTTP가 정식 사양으로 공개된 것은 1996년 5월이다. 이 때 HTTP/1.0 으로 RFC1945가 발행되었다.    

<br>

## `HTTP/1.1`

1997년 1월에 공개된 HTTP/1.1 버전이 현재 가장 많이 사용되는 버전이다.

<br>

## `네트워크의 기본은 TCP/IP`

HTTP를 이해하기 위해서는 TCP/IP 프로토콜에 어느정도 알아야 한다. 인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP 라는 프로토콜에서 움직이고 있고, 그 중하나가 HTTP 이다.

<br>

## `TCP/IP는 프로토콜의 집합`

컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 서로 같은 방법으로 통신하지 않으면 안된다. 서로 다른 하드웨어와 운영체제 등을 가지고 서로 통신응 하기 위해서는 모든 요소에 규칙이 필요하게 된단. 이러한 규칙을 프로토콜이라고 부른다.

`인터넷과 관련된 프로토콜들을 모은 것을 TCP/IP 라고 부른다.`

<br>

## `계층으로 관리하는 TCP/IP`

TCP/IP에서 중요한 개념 중 하나가 `계층(Layer)` 입니다. `TCP/IP는 애플리케이션 계층, 트랜스포트 계층, 네트워크 계층, 링크 계층` 이렇게 4계층으로 나뉘어 있습니다.

<br>

### `애플리케이션 계층`

FTP랑 DNS, HTTP 등도 애플리케이션의 한 가지이다.

<br>

## `트랜스포트 계층`

트랜스포트 계층은 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공한다. 트랜스포트 계층에서는 서로 다른 성질 `TCP`와 `UDP` 두 가지 프로토콜이 있다.

<br>

## `네트워크 계층`

네트워크 계층은 네트워크 상에서 패킷의 이동을 다룬다. `패킷이란 전송하는 데이터의 최소 단위이다.` 이 계층에서는 어떠한 경로를 거쳐 상대의 컴퓨터까지 패킷을 보낼지를 결정하기도 한다. 

인터넷의 경우라면 상대 컴퓨터에 도달하는 동안에 여러 대의 컴퓨터랑 네트워크 기기를 거쳐서 상대방에게 배송된다. 그러한 `여러 가지 선택지 중에서 하나의 길을 결정하는 것이 네트워크 계층의 역할이다.`

<br>

## `링크 계층`

네트워크에 접속하는 하드웨어적인 면을 다룬다. 하드웨어적 측면은 모두 링크 계층의 역할이다.

<br>

## `TCP/IP 통신의 흐름`

HTTP 통신의 흐름을 간략하게 예를 들어보자.

1. 클라이언트의 애플리케이션 계층(HTTP)에서 어느 웹 페이지를 보고 싶다라는 HTTP Request를 보낸다.
2. 다음 트랜스포트(TCP)에서는 애플리케이션 계층에서 받은 데이터(HTTP 메세지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달한다.
3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달한다.
4. 수신측 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의 계층까지 전달하여 애플리케이션 계층까지 도달한다.

<br>

## `HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS`

TCP/IP 중에서 HTTP와 관계가 깊은 IP, TCP, DNS 세 개의 프로토콜에 대해서 알아보자. 

<br>

### `배송을 담당하는 IP`

`IP`는 계층으로 말하자면 `네트워크 층`에 해당된다. IP는 TCP/IP라는 명칭의 일부가 될 정도로 중요한 프로토콜이다. `IP의 역할은 개개의 패킷을 상대방에게 전달하는 것이다.` 상대방에게 전달하기까지 여러 가지 요소가 필요하다. 그 중에서도 `IP 주소`, `MAC 주소` 라는 요소가 중요하다.

IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유의 주소이다. 

<br>

### `통신은 ARP를 이용하여 MAC 주소에서 한다.`

IP 통신은 MAC 주소에 의존해서 통신을 한다. 인터넷에서 통신 상대가 같은 랜선 내에 있을 경우는 적어서 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착한다. 그렇게 중계하는 동안에는 다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아가는 것이다. 이 때 `ARP(Address Resolution Protocol)`이 사용된다.

`ARP는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있다.`

![스크린샷 2022-03-22 오후 8 48 44](https://user-images.githubusercontent.com/45676906/159475207-b5feb8c8-1ac6-45b7-b172-f4a3c2b2b1ad.png)

<br>

## `그 누구도 인터넷 전체를 파악하고 있지는 않다.`

목적지까지 중계를 하는 도중에 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만을 알고 있다. 이 시스템을 `라우팅`이라고 부른다.

<br>

## `신뢰성을 담당하는 TCP`

TCP는 계층으로 말하자면 트랜스포트 층에 해당하는데, 신뢰성 있는 바이트 스트림 서비스를 제공한다. `바이트 스트림 서비스란 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 의미한다.`

`결국 TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고, 정확하게 도착했는지 확인하는 역할을 담당하고 있다.`

<br>

### `상대에게 데이터를 확실하게 보내는 것이 일이다.`

상대에게 확실하게 데이터를 보내기 위해서 TCP는 `쓰리웨어 핸드셰이닝(three way handshaking)` 이라는 방법을 사용하고 있다. 이 방법은 패킷을 보내고 나서 바로 끝내는 것이 아니라, 보내졌는지 여부를 상대에게 확인하러 간다. 이것은 `SYN`, `ACK` 라는 `TCP 플래그`를 사용한다.

![image](https://user-images.githubusercontent.com/45676906/159477229-501d6faf-e331-41ba-97e3-d8a1d11a4f09.png)

1. 송신측에서는 최초 `SYN` 플래그로 상대에게 접속함과 동시에 패킷을 보낸다.
2. 수신측에서는 `SYN/ACK` 플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 전한다.
3. 마지막으로 송신측이 `ACK 플래그`를 보내 패킷 교환이 완료되었음을 전한다.

<br>

어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 수순으로 패킷을 재전송한다.

<br>

## `이름 해결을 담당하는 DNS`

![스크린샷 2022-03-22 오후 9 11 02](https://user-images.githubusercontent.com/45676906/159479047-e7e492d1-40e2-4284-80c4-be67a92a2562.png)

`DNS(Domain Name System)`는 HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공한다. 

<br>

## `브라우저에 www.naver.com를 치면 일어나는 일`

![image](https://user-images.githubusercontent.com/45676906/148794878-b48f001d-ab97-4fb8-8bc9-caa85c00431f.png)

1. 브라우저에 입력한 주소를 운영체제에게 DNS로 요청을 보내서 IP를 알아내달라는 요청을 보낸다.
2. 운영체제는 브라우저의 URL을 DNS 서버에게 질의한다. DNS 서버는 root 서버로부터 조회해서 해당 도메인의 IP가 무엇인지를 알아낸다.
3. DNS로 부터 받은 IP 주소를 기반으로 IP 주소, Port, 요청 메세지를 기반으로 HTTP 메세지를 만든다. 
4. 애플리케이션 계층에서 만든 HTTP 메세지를 TCP 계층에서 통신하기 쉽도록 HTTP 메세지를 패킷으로 분해한다.(조각내서 일련번호를 부여한다.)
5. 네트워크 계층에서는 사대가 어디에 있는지 찾아서 중계해가면서 패킷을 상대방에서 전송한다. 상대 IP 주소와 라우터 ARP를 사용하여 상대 MAC 주소를 확인한다.
6. 받는 쪽 TCP 계층에서 전송오는 패킷을 수신하고 도착한 패킷을 일련번호를 보고 조립한다.
7. 받는 쪽 애플리케이션 계층에서 HTTP 메세지를 보고 해당 리소스에 맞는 것을 사용자에게 보여준다.