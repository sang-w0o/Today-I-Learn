## `릴레이션 특징과 키`

이번 글에서는 `RDBMS`의 가지고 특징에 대해서 간단하게 알아보고, 아주 중요한 `키(Key)` 개념에 대해서 알아보겠습니다.  

<br>

## `Relation` 

- `릴레이션(relation)`은 `테이블`을 의미하는 단어입니다.
- `튜플(tuple)`은 테이블의 `행`을 의미합니다.
- `속성(attribute)`은 테이블의 `열`을 의미합니다.


<br>

## `릴레이션 특성`

### `튜플의 유일성(uniqueness of tuple)`

- 릴레이션 안에는 똑같은 튜플이 존재할 수 없습니다.
- 모든 튜플은 다른 튜플과 구별되는 유일한 속성 값이 있어야 합니다.
    
<img src="https://user-images.githubusercontent.com/45676906/93314672-0f384800-f845-11ea-815d-721a84f02adf.png">
    
<br> <br>
    
### `튜플의 무순서성(no ordering of tuple)`

- 릴레이션의 튜플 사이에 순서는 의미가 없습니다.
- 집합은 포함한 원소들 사이에 순서가 없습니다.
    
<img src="https://user-images.githubusercontent.com/45676906/93314730-25460880-f845-11ea-9649-c5b30a21b732.png">    

<br> <br>
    
### `속성의 무순서성 (no ordering of attribute)`

- 릴레이션의 속성 사이에 순서는 의미가 없습니다.
- 릴레이션이 속성의 집합이기 때문에 같은 이유로 순서를 갖지 않습니다.
- 속성 값은 속성의 순서가 아닌 속성 이름에 의해 참조됩니다.
    
<img src="https://user-images.githubusercontent.com/45676906/93314977-748c3900-f845-11ea-814e-af4b14a2f717.png">
 
<br> <br>

### `속성의 원자성(atomicity of attribute)`

- 릴레이션을 구성하는 모든 속성 값은 의미적으로 더 이상 분해할 수 없는 하나의 값만 갖습니다. (정규화와 관련있습니다.)
- 각 속성 값으로 의미적으로 더 쪼개서 사용할 수 있는 값이나 여러 개의 값이 허용되지 않습니다.


<img src="https://user-images.githubusercontent.com/45676906/93315176-b0270300-f845-11ea-89f3-51ca2dba4d67.png">

<br> <br>

## `키(Key) 특성`

### `키(Key)`

- 릴레이션에서 튜플들을 유일하게 구별하는 속성 또는 속성들의 집합입니다.

<br>

## `키의 특성`

### `유일성(uniqueness)`

- 하나의 릴레이션에서 모든 튜플은 서로 다른 키 값을 가져야합니다.
  
### `최소성(minimalty)`

- 꼭 필요한 최소한의 속성들로만 키를 구성합니다.
    
<br>


### `슈퍼키(superkey)`

- 튜플을 유일하게 식별할 수 있는 속성 집합
- `유일성`은 만족하지만 `최소성`은 만족하지 못합니다.

<br>

### `슈퍼키의 예`

|  |  | 
|------|---|
| {폰번호} | 유일성 ( O )최소성 ( O )|
| {학원생이름, 폰번호} | 유일성 ( O ) 최소성 ( × ) |
| {학원생이름, 학교이름, 학년, 반, 반번호}|유일성 ( O ) 최소성 ( × ) |
| {학교이름, 학년, 반, 반번호, 폰번호} | 유일성 ( O ) 최소성 ( × ) |

핸드폰 번호는 중복될 수 없기 때문에 `유일성`을 만족할 수 있습니다. 그렇기 때문에 `핸드폰 번호`외의 것이 나오면 `최소성`을 만족하지 못하는 것입니다.
(`핸드폰번호`만 있어도 구별할 수 있는데 다른 `속성`값이 더 `Key`에 포함되기 때문입니다.)

<br>

### `후보키(candidate key)`

- 튜플을 유일하게 식별할 수 있는 속성들의 최소 집합
- `유일성`, `최소성`을 모두 만족
- `슈퍼키` 중에서 `최소성`을 만족하는 키

<img src="https://user-images.githubusercontent.com/45676906/93317235-2f1d3b00-f848-11ea-8006-25e4834438c0.png">

<br> <br>

### `후보키의 예`

|  |  | 
|------|---|
| {폰번호} | 유일성 ( O ) 최소성 ( O )|
| {학교이름, 학년, 반, 반번호} | 유일성 ( O ) 최소성 ( O ) |

위와 같은 테이블이 있다고 가정할 때, 위의 `후보키`의 예시는 `유일성`, `최소성`을 모두 만족시킵니다. 

<br>

### `기본키(PK: Primary Key)`

- 튜플을 대표하도록 선정된 후보키
- 후보키 중에서 하나를 기본키로 선택하여 지정
- 의미적으로 튜플을 가장 대표할 수 있고 식별 수단으로도 적합한 후보키를 기본키로 선정합니다.

<br>

### `기본키의 예`

|  |  | 
|------|---|
| {폰번호} | 유일성 ( O )최소성 ( O )|
| {학교이름, 학년, 반, 반번호} | 유일성 ( O )최소성 ( O ) |

<br>

### `기본키 선정 기준`

- 후보키가 하나일 경우, 바로 기본키가 됩니다.
- 후보키가 여러 개일 경우, 아래의 기준을 충족하는 후보키를 우선적으로 고려합니다.
    - 값이 자주 변경되지 않는 정적인 속성으로 구성된 후보키(`이름`보다는 `주민번호`가 적합합니다.)
    - 널 값을 가질 수 없는 속성으로 구성된 후보키
    - 속성 개수가 작은 후보키
  
<br>

### `대체키(AK: Alternate Key)`

- 기본키로 선정되지 못한 후보키
- 둘 이상의 후보키 중에서 하나를 기본키로 지정하면 나머지 후보키들은 대체키가 됨
- 릴레이션 안에서 기본키는 하나이지만 대체키는 여러 개 존재할 수 있음

<br>

### `릴레이션의 키`

<img src="https://user-images.githubusercontent.com/45676906/93320978-abb21880-f84c-11ea-8577-a8a775f7248e.png">
    
<br> <br>

### `외래키(foreign key)`

- 특정 릴레이션의 기본키를 참조하는 속성 집합
- 기본키와 외래키는 릴레이션간의 연관성을 표현
- 의미적 연관성이 있음에도 다른 릴레이션으로 분류된 튜플 사이의 연결고리 역할

<br>

### `릴레이션 관계`

- 참조하는 릴레이션 : 외래키를 가진 릴레이션
- 참조되는 릴레이션 : 외래키가 참조하는 기본키를 가진 릴레이션

<img src="https://user-images.githubusercontent.com/45676906/93321486-2b3fe780-f84d-11ea-849c-51518460dd43.png">

<br> <br>

위의 사진처럼 `주 키`를 갖고 있는 테이블은 `참조되는 릴레이션`이고, `외래키`를 갖고 있는 테이블은 `참조하는 릴레이션`이다.


